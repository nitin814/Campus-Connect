<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="data:image/x-icon;," type="image/x-icon"> 
    <title>Interact</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="/stylesheets/style_oneone.css">
</head>
<body>
    <div class='main_container'>
        <div class='dashboard_container'>
            <div>
                <div class='personal_code_container'>
                    <div class='personal_code_title_container'>
                        <p class='personal_code_title_paragraph'>
                            Your Roll No
                        </p>
                    </div>
                    <div class="personal_code_value_container">
                        <p class='personal_code_value_paragraph' id='personal_code_paragraph'><%= user.email.split('@')[0] %></p>
                        <!-- <button class='personal_code_copy_button' id='personal_code_copy_button'>
                            <img src='/images/copyButton.png'></img>
                        </button> -->
                    </div>
                </div>
                <div class='personal_code_connecting_container'>
                    <p class='personal_code_connecting_paragraph'>Enter Roll No</p>
                    <div class='personal_code_connecting_input_container'>
                        <input class='personal_code_input' id='personal_code_input'></input>
                    </div>
                    <div class='personal_code_connecting_buttons_container'>
                        <button class='connecting_button' id='personal_code_chat_button'>
                            <img src='/images/Chat.jpg' class='connecting_buttons_image'></img>
                        </button>
                        <button class='connecting_button display_none' id='personal_code_video_button'>
                            <img src='/images/videochat.jpg' class='connecting_buttons_image'></img>
                        </button>
                    </div>
                </div>
                <div class='dashboard_blur display_none' id='dashboard_blur'></div>
            </div>
            <div class='local_video_container'>
                <video class='local_video' id='local_video' autoplay></video>
            </div>
        </div>
        <div class='call_container'>
            <div class='videos_container'>
                <div id='video_placeholder' class='videos_placeholder'>
                </div>
                <video class='remote_video display_none' autoplay id='remote_video'></video>
                <div class='call_buttons_container display_none' id='call_buttons'>
                    <button class='call_button_small' id='mic_button'>
                        <img src='/images/mic.png' id='mic_button_image'></img>
                    </button>
                    <button class='call_button_small' id='camera_button'>
                        <img src='/images/camera.png' id='camera_button_image'></img>
                    </button>
                    <button class='call_button_large' id='hang_up_button'>
                        <img src='/images/hangUp.png'></img>
                    </button>
                    <button class='call_button_small' id='screen_sharing_button'>
                        <img src='/images/switchCameraScreenSharing.png'></img>
                    </button>
                </div>
                <div class='finish_chat_button_container display_none' id='finish_chat_button_container'>
                    <button class='call_button_large' id='finish_chat_call_button'>
                        <img src='/images/hangUp.png'></img>
                    </button>
                </div>
            </div>
        </div>
        <div class='messenger_container'>
            <div class='messages_container' id='messages_container'></div>
            <div class='new_message_container display_none' id='new_message'>
                <input class='new_message_input' id='new_message_input' type='text' placeholder="Type your message..."></input>
                <button class='send_message_button' id='send_message_button'>
                    <img class='send_message_button_image' src='/images/sendMessageButton.jpg'></image>
                </button>
            </div>
        </div>    
        <div id="dialog">
        </div>
    </div>
        <% if (user) { %>
            <script src="/socket.io/socket.io.js"></script>
            <script>
                let user = {
                    username: '<%= user.username %>',
                    email: '<%= user.email %>',
                    profilephoto: '<%= user.profilephoto %>'
                }
            </script>
            <script src="/javascripts/constants.js" type="module"></script>
            <script src="/javascripts/ui.js" type="module"></script>
            <script src="/javascripts/store.js" type="module"></script>
            <script src="/javascripts/main.js" type="module"></script>
        <% } %>
</body>
</html>